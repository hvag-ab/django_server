from functools import wraps
from line_profiler import LineProfiler


def lp(func):
    """
    逐行显示函数调用时间
    """

    @wraps(func)
    def wrapper(*args, **kwargs):
        lp = LineProfiler()
        lp_wrapper = lp(func)
        res = lp_wrapper(*args, **kwargs)
        lp.print_stats()
        return res

    return wrapper
    
"""
使用：

class Test(APIView):

    @lp
    def get(self, request, *args, **kwargs):
        pass

"""
