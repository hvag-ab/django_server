from functools import wraps
from line_profiler import LineProfiler


def lp(func):
    """
    逐行显示代码运行时间
    """

    @wraps(func)
    def wrapper(*args, **kwargs):
        profile = LineProfiler()
        lp_wrapper = profile(func)
        res = lp_wrapper(*args, **kwargs)
        profile.print_stats()
        return res
        
    return wrapper
    
"""
使用：

class Test(APIView):

    @lp
    def get(self, request, *args, **kwargs):
        func1(..)
        func2(..)
        
如果发现func1 函数处理叫慢
@lp
func1  查看具体

"""
